# ChatGPT 导出为HTML存储
**我们需要将对ChatGPT重要的对话记录保存到我们自己的知识库中☺️————BecomingW**
将 ChatGPT 当前对话一键导出为 **纯静态 HTML 文件**，并直接保存到你指定的默认文件夹.<br>
建议与Obsidian联用（Obsidian下载[Html Reader](https://github.com/nuthrash/obsidian-html-plugin)）,将默认存储地址设置为obsidian的文件夹地址下的ChatGPT文件夹

---

## ✨ 功能亮点

### 两按钮工作流
- 💾 **保存到默认位置**：一键导出到已设置的文件夹。  
- ⚙️ **设置默认位置**：选择/更改导出文件夹（跨会话记忆）。

### 自动标题
等待 `<head><title>` 稳定后再取值，确保文件名与 HTML `<title>` 正确匹配。

### 结构与样式保留
- 保留对话中的标题、列表、代码块、表格、图片等常见元素。
- 内联样式，亮/暗色主题友好，无需外部依赖。

### 防丢按钮
采用 `MutationObserver` 自愈挂载，页面重绘后按钮会自动重建，永不消失。

### 避免覆盖
同名文件将自动追加 `(1)`, `(2)`, … 后缀保存，防止误删原始文件。

---

## 📦 安装步骤

1. 安装浏览器扩展 [Tampermonkey](https://www.tampermonkey.net/)（**Chrome**👍/ Edge / Brave / Vivaldi 等）。
2. 在 Tampermonkey 中点击 **“新建脚本”**，将脚本源码粘贴并保存。
3. 打开 [https://chat.openai.com](https://chat.openai.com) 或 [https://chatgpt.com](https://chatgpt.com)，右上角会出现：
**保存到默认位置** ｜ **设置默认位置**
> ⚠️ **注意**：脚本依赖 **File System Access API**，仅在 Chromium 系浏览器支持。Firefox、Safari 暂无“直接写入文件夹”能力。

---

## 🚀 使用方法

### 第一次使用
1. 点击 ⚙️ **设置默认位置**，选择你的导出目录（推荐如：`D:\ObsidianVault\ChatGPT\`）。
2. 授予写入权限后，脚本会将目录句柄安全保存在浏览器 IndexedDB 中，跨会话可复用。

### 日常导出
1. 打开任意 ChatGPT 对话页面。
2. 点击 💾 **保存到默认位置**。脚本将：
- 等待 `<head><title>` 变为真实对话标题；
- 采集当前已渲染的消息内容；
- 生成完整 HTML 文档并写入默认目录。

> 📌 **提示**：ChatGPT 页面采用虚拟滚动。如需导出更长历史，请先向上滚动加载更多消息，再点击保存。

---
### ❓ 常见问题（FAQ）
Q1：按钮怎么不见了？
A：ChatGPT 是单页应用，可能重绘 DOM。脚本内置自愈挂载机制，通常会自动恢复。若仍未出现，请检查：
脚本是否已启用；
是否存在同类脚本冲突（建议先禁用其他类似脚本）；
打开开发者工具（F12 → Console）查看是否有报错信息。

Q2：保存失败，提示没有权限？
A：默认目录的写入权限可能过期或被重置。请重新点击 ⚙️ 设置默认位置，选择目录并授予权限即可。

Q3：为什么导出内容不完整？
A：由于虚拟滚动机制，未滚动加载的历史消息不会被渲染。请向上滚动加载更多内容后再保存。

Q4：会不会覆盖同名文件？
A：不会。若检测到重名，脚本会自动在文件名后添加 (1), (2) … 等序号。

Q5：能在 Firefox 使用吗？
A：目前 不能。Firefox 尚不支持 File System Access API 的文件夹写入功能。可等待后续“下载为文件”兼容版本，或使用 Chrome/Edge 等 Chromium 浏览器导出。

Q6: 为什么导出为HTML不是JSON或者Markdown
A：非官方的导出的Markdonw支持很差，没有层级渲染；JSON可读性很差，仅能用作存储；同时以上两种方式开源社区已有很多脚本，我不需要重复造轮子。

### 🔐 隐私与安全
脚本仅在本地浏览器运行，不上传数据、不请求外网接口。
仅在你点击保存时请求访问你选择的文件夹。
默认目录句柄安全保存于浏览器 IndexedDB，可随时通过清除站点数据来失效，无持久追踪风险。
### 🌐 兼容性
浏览器 支持度
Chrome 96+
✅ 完全支持
Edge 96+
✅ 完全支持
Brave / Vivaldi
✅ 支持
Firefox
⚠️ 不支持文件夹写入
Safari
❌ 暂不支持

### 🙏感谢 <br>
ChatGPT5 辅助编程

### 📄 许可协议
MIT License
Copyright © 2025
